<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DINO'S ATELIER | MAGAZINE SHOP</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
    <style>
        h2 { font-family: 'Cormorant Garamond', serif; font-size: 42px; letter-spacing: 5px; text-transform: uppercase; }
        body { background-color: #FAF9F6; color: #333333; font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; margin: 0; padding-bottom: 100px; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; text-align: center; }
        .status-bar { position: fixed; top: 0; width: 100%; background: rgba(255, 255, 255, 0.95); padding: 12px 0; z-index: 1000; border-bottom: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .back-home-btn { background: transparent; color: #555; border: 1px solid #ccc; padding: 5px 15px; border-radius: 20px; text-decoration: none; font-size: 13px; }
        .coin-display { font-size: 16px; font-weight: bold; color: #333; }
        .refresh-btn { background: #fff; color: #333; border: 1px solid #333; padding: 5px 12px; border-radius: 6px; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 5px; }
        .header-section { margin-top: 100px; margin-bottom: 30px; }
        .price-tag { color: #b8860b !important; font-weight: bold; font-size: 14px; }
        .magazine-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; padding: 10px; }
        .magazine-card { background: #ffffff; border-radius: 12px; overflow: hidden; border: 1px solid #eee; transition: 0.3s; cursor: pointer; position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .magazine-card:hover { transform: translateY(-8px); border-color: #d4af37; }
        .magazine-card img { width: 100%; height: auto; display: block; }
        .card-info { padding: 15px; text-align: center; }
        .buy-tag { font-weight: 800; font-size: 14px; display: block; margin-bottom: 5px; }
        .stock-count { font-weight: bold; color: #d9534f; }
        .sold-out { opacity: 0.5; filter: grayscale(1); pointer-events: none; }
        .sold-out-badge { position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%) rotate(-15deg); background: rgba(217, 83, 79, 0.9); color: white; padding: 8px 16px; border: 2px solid white; font-weight: bold; z-index: 10; border-radius: 4px; display: none; }
        #black-market-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.98); z-index:2000; overflow-y:auto; }
        .quiz-container { max-width: 600px; margin: 40px auto; text-align: center; padding: 20px; color: white; }
        .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: #252525; color: #fff; border: 1px solid #444; border-radius: 10px; cursor: pointer; text-align: left; }
        #floating-market-btn { position: fixed; bottom: 30px; right: 30px; background: #ff4b4b; color: white; border: none; padding: 15px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 1500; display: none; box-shadow: 0 4px 15px rgba(255, 75, 75, 0.3); }
        .dev-badge { position: fixed; top: 70px; right: 10px; background: #333; color: #fff; padding: 5px; border-radius: 5px; font-size: 10px; cursor: pointer; z-index: 2000; }
    </style>
</head>
<body>

<div id="main-content">
    <div class="status-bar">
        <a href="index.html" class="back-home-btn">â† å›åˆ°é¦–é </a>
        <div class="coin-display">æŒæœ‰é­šå¹£: <span id="coin-count">0</span> ğŸŸ</div>
        <button id="refresh-data" class="refresh-btn" onclick="fetchStockData()">ğŸ”„ æ›´æ–°åº«å­˜</button>
    </div>

    <div class="container">
        <div class="header-section">
            <h2 style="font-weight: 900;">[ DINO 27TH BIRTHDAY ]</h2>
            <p>é»æ“Šä¸‹æ–¹ç…§ç‰‡å³å¯é€²è¡Œè¨‚è³¼ç™»è¨˜</p>
            <p class="price-tag">æ¯å¥—éœ€æ¶ˆè€— 3 é­šå¹£ï¼Œä¹Ÿè«‹æ³¨æ„æ°´çºå°ºå¯¸!</p>
        </div>
        <div id="magazine-gallery" class="magazine-gallery"></div>
    </div>

    <button id="floating-market-btn" onclick="openMarket()">{ é€²å…¥é»‘å¸‚æŒ‘æˆ° }</button>
</div>

<div id="black-market-overlay">
    <div class="quiz-container">
        <div id="quiz-coin-board" style="display: flex; justify-content: space-between; background: #ffffff; padding: 15px 25px; border-radius: 15px; margin-bottom: 25px; color: #000;">
            <div style="text-align: left;"><span style="color: #888; font-size: 12px; font-weight: bold;">åŸæœ¬é­šå¹£</span><br><span id="quiz-orig-coins" style="font-size: 20px; font-weight: 900;">0</span> ğŸŸ</div>
            <div style="text-align: right;"><span style="color: #666; font-size: 12px; font-weight: bold;">ç²å¾—çå‹µ</span><br><span id="quiz-temp-coins" style="font-size: 20px; font-weight: 900;">0</span> ğŸŸ</div>
        </div>
        <p id="quiz-story" style="color:#ffd026; font-style:italic; margin-bottom:10px;"></p>
        <p id="quiz-question" style="font-size:22px; font-weight:bold; margin-bottom:30px; color:#fff;"></p>
        <div id="quiz-options"></div>
        <p id="quiz-leave" onclick="handlePenaltyClose()" style="margin-top:50px; color:#888; cursor:pointer; text-decoration:underline;">LEAVE MARKET</p>
    </div>
</div>

<script>
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTwOll10EJ23JtCAxUzRtOY6r8yW0yc0Tgn9TyuloPl4pR1lPuuVK5iOpV1KmAkaY4kSq1Jcj6OiQP0/pub?gid=488908997&single=true&output=csv";
    const GITHUB_ASSETS = "https://raw.githubusercontent.com/jenny7824212-stack/Dino-Happy-Birthday/main/";
    
    // --- â° æ™‚é–“è¨­å®š ---
    const OPEN_DATE = new Date("Feb 08, 2026 10:00:00").getTime();
    const COMP_START = new Date("Feb 11, 2026 10:00:00").getTime();
    const COMP_END = new Date("Feb 12, 2026 23:00:00").getTime(); // 12è™Ÿæ™šä¸Š11é»é—œç«™

    let coins = parseInt(localStorage.getItem('dino_coins')) || 3;
    let temporaryCoins = 0;
    let currentQuiz = -1;
    let showingStory = true;

    const isDeveloper = new URLSearchParams(window.location.search).get('dev') === 'otter921008';

    // 1. æ­£å¼é»‘å¸‚é¡Œåº« (18é¡Œ)
    const questions = [
        { story: "ã€Œ Dino åˆå¢åŠ ä¸€æ­²äº†å‘¢ï¼Œè¼¸å…¥æ•¸å­—é€²å…¥é»‘å¸‚å§ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” é€™ä¸€å¤©å…‹æ‹‰éƒ½æœŸå¾…ç›´æ’­è¦‹åˆ°çºã€‚</span>", q: "å•é¡Œ 1ï¼šæç‡¦çš„ç”Ÿæ—¥æ˜¯å¹¾è™Ÿ?", a: ["2/10", "2/11", "2/12", "3/11"], correct: 1 },
        { story: "ã€Œ ä½ æ³¨æ„åˆ°äº†ä¸€å€‹æ­£åœ¨æ’­æ”¾çš„æ”¶éŸ³æ©Ÿã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æç‡¦çš„æ—¥æ–‡é›»å°ç¸½æ˜¯å¾ˆæœ‰è¶£ï¼Œè€Œä¸”å­¸ç¿’æ—¥æ–‡ååˆ†åŠªåŠ›å‘¢ã€‚</span>", q: "å•é¡Œ 2ï¼šæç‡¦ä¸»æŒçš„SCHOOL OF LOCK æ˜¯å›ºå®šæ¯å€‹æœˆç¬¬å¹¾é€±æ›´æ–°?", a: ["1", "2", "3", "4"], correct: 1 },
        { story: "ã€Œ å•†äººæ­£è²©è³£åœ‹ç‹è®€æ›¸æ™‚æœŸçš„ç›¸é—œæƒ…å ±ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æç‡¦é–‹å¿ƒé–‹ç›´æ’­æ‹¿è‘—ç•¢æ¥­è­‰æ›¸ï¼Œååˆ†é©•å‚²ã€‚</span>", q: "å•é¡Œ 3ï¼šæç‡¦æˆå¹´é«˜ä¸­ç•¢æ¥­çš„Soloæ›²æ˜¯?", a: ["Wait", "Last Order", "Zero", "High Five"], correct: 2 },
        { story: "ã€Œ ä½ é€²å…¥ä¸€é–“é…’é¤¨ï¼Œé…’ä¿èªªåªè¦å›ç­”å•é¡Œæ­£ç¢ºï¼Œèƒ½æä¾›1999å¹´çš„ç´…é…’çµ¦ä½ ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” Wait é€£çºŒæ‹æ”24å°æ™‚çœŸçš„å¥½è¾›è‹¦ï¼Œä½†å“¥å“¥å€‘éƒ½ä¾†åŠ æ²¹äº†ã€‚</span>", q: "å•é¡Œ 4ï¼šã€ŠWaitã€‹èŠ±çµ® MVæ‹æ”æ™‚,æœ‰å¹¾ä½å“¥å“¥åˆ°å ´åŠ æ²¹?", a: ["10", "11", "12", "13"], correct: 2 },
        { story: "ã€Œ ä½ åœ¨é»‘å¸‚æ‰¾åˆ°ä¸€å¼µåœ°åœ–ï¼Œç™¼ç¾é»‘å¸‚åˆ†æˆäº†ä¸‰å€ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” Wait é‚„å¾—æ›åœ°æ–¹æ‹æ”ï¼Œä½†æœ€å¾Œçš„ä½œå“çœŸçš„è¶…ç´šå¥½çœ‹ã€‚</span>", q: "å•é¡Œ 5ï¼šæ‹æ” wait MV ä»¥ä¸‹éæ‹æ”åœ°é»?", a: ["é¾è·¯å€", "å»£æ´¥å€", "é¾å±±å€", "æ¾å³¶"], correct: 2 },
        { story: "ã€Œ è·¯é‚Šçš„å’–å•¡å»³çª—å£ï¼Œç•™è‘—ä¸€å¼µè™Ÿç¢¼ç‰Œã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æœ€å¾Œä¸€å¹•ç´…è‰²æ¯›è¡£çš„ç‡¦ï¼Œå¿ƒç¸½æ˜¯åœ¨é‚£ç©ºäº†ä¸€æ‹ã€‚</span>", q: "å•é¡Œ 6ï¼šåœ¨wait MVä¸­æç‡¦çš„è™Ÿç¢¼ç‰Œæ˜¯å¹¾è™Ÿ?", a: ["365", "211", "526", "214"], correct: 0 },
        { story: "ã€Œ ä½ åœ¨é»‘å¸‚é‡åˆ°äº†ä¸€ä½è€å¥¶å¥¶ï¼Œæ‹¿äº†ä¸€ç›’é†¬èŸ¹çµ¦ä½ ï¼Œç‚ºä½ åŠ æ²¹ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æç‡¦å¥¶å¥¶çš„é†¬èŸ¹ï¼Œç‡¦ä¸€çœ¼å°±çŸ¥é“æ˜¯å“ªå€‹ã€‚</span>", q: "å•é¡Œ 7ï¼šæç‡¦å¥¶å¥¶çš„é†¬èŸ¹æ˜¯å“ªè£¡çš„é¢¨æ ¼?", a: ["æ…¶å°šé“", "æ±ŸåŸé“", "å¿ æ¸…é“", "å…¨ç¾…é“"], correct: 3 },
        { story: "ã€Œ é»‘å¸‚çš„å‹•æ…‹å»£å‘Šç‰†æ­£æ’­è‘—ä»¥å‰åœ‹ç‹æ‹æ”çš„ç¶œè—ç‰‡æ®µï¼Œæ‰®æ¼”å¤§å”çœŸçš„å¥½åƒå‘¢ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” é™¤äº†èˆå°ï¼Œæç‡¦çš„æ¼”æŠ€ä¹Ÿå¥½å²å®³ã€‚</span>", q: "å•é¡Œ 8ï¼šä¸‹åˆ—å“ªä¸€å€‹ä¸æ˜¯éµäººå¤§å”åº•ä¸‹è—äºº?", a: ["è¶™ä¹™å¥½", "Charles", "ç¢©ç‰", "Leo"], correct: 0 },
        { story: "ã€Œ å­æ°‘éƒ½çŸ¥é“åœ‹ç‹çš„å•Ÿè’™å¶åƒæ˜¯éº¥å¯Â·å‚‘å…‹æ£®ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” ç‡¦çœŸçš„æˆç‚ºäº†éå¸¸è€€çœ¼çš„æ˜æ˜Ÿå‘¢ã€‚</span>", q: "å•é¡Œ 9ï¼šåœ¨æèŒ‚çServiceä¸­ï¼Œå”±çš„æ˜¯éº¥å¯çš„å“ªé¦–æ­Œæ›²?", a: ["Beat It", "Thriller", "Billie Jean", "Heal The World"], correct: 3 },
        { story: "ã€Œ ç™¼ç¾ä¸€é–“æœé£¾åº—ï¼Œæ›è‘—åœ‹ç‹åœ¨ RIGHT HERE æ¼”å”±æœƒçš„æœé£¾ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” é›–ç„¶å¾ˆæ¼‚äº®ï¼Œä½†å»è¨­è¨ˆä¸è‰¯å—å‚·äº†ã€‚</span>", q: "å•é¡Œ 10ï¼šé«˜é™½å ´Rainèˆå°ç¬¬ä¸€å¤©èˆ‡ç¬¬äºŒå¤©è¡¨æ¼”æœè£æœ‰ä½•è™•ä¸åŒ?", a: ["é‹å­", "æ‰‹å¥—", "è‡‚ç’°", "éº¥å…‹é¢¨"], correct: 2 },
        { story: "ã€Œ åœ‹ç‹æ¯æ¬¡è¦‹å­æ°‘æ™‚ï¼Œéƒ½æœƒåšç‰¹æ®Šé€ å‹ï¼ŒæŸ“é«®ã€ç‡™é«®ã€ç•™é•·....é‚„æœ‰ç‰™é‘½ï¼Œé€™è£¡æœ‰å„ç¨®é€ å‹çš„æµ·å ±ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” ç¬‘çš„æ™‚å€™æœƒéœ²å‡ºç‰™é‘½ï¼Œé‚„æœƒä¸å¥½æ„æ€é®ä½ã€‚</span>", q: "å•é¡Œ 11ï¼šæç‡¦åœ¨face the sun åšäº†ç‰™é‘½é€ å‹ï¼Œåšäº†å¹¾é¡†ç‰™?", a: ["2", "3", "4", "5"], correct: 1 },
        { story: "ã€Œ æ”å½±æ©Ÿåœæ ¼åœ¨ä¸€å€‹ç§‹æ—¥èƒŒæ™¯ä¸‹ï¼Œæ˜¯èˆ‡æˆå“¡å…±èˆçš„ç·šæ¢ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” ç‡¦å¹«æˆå“¡è¨­è¨ˆèˆè¹ˆçœŸçš„ç‰¹åˆ¥é©åˆã€‚</span>", q: "å•é¡Œ 12ï¼šDanceologyä¸­,å’ŒçŸ¥ç§€åœ¨å“ªè£¡æ‹æ”çš„?", a: ["æ±äº¬", "å¤§é˜ª", "é¦–çˆ¾", "åå¤å±‹"], correct: 3 },
        { story: "ã€Œ æ‰¾åˆ°åœ‹ç‹é æ¸¡æµ·æ´‹ï¼Œç¨è‡ªç«™ä¸Šèˆå°çš„ç…§ç‰‡ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æ·±å¤œçœ‹è‘—ç›´æ’­ï¼ŒçœŸçš„å¾ˆé–‹å¿ƒã€‚</span>", q: "å•é¡Œ 13ï¼š2025ç¨è‡ªä¸€äººå‡ºåœ‹è¡¨æ¼”æ˜¯å»å“ªè£¡?", a: ["æ—¥æœ¬", "ç¾åœ‹", "æ²™çƒåœ°é˜¿æ‹‰ä¼¯", "æ³•åœ‹"], correct: 2 },
        { story: "ã€Œ ç‰†ä¸Šè²¼æ»¿äº†å„é¡ Challenge çš„åˆä½œè¨˜éŒ„ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æç‡¦è·³ä»»ä½•èˆè¹ˆéƒ½å®Œç¾æ¶ˆåŒ–ã€‚</span>", q: "å•é¡Œ 14ï¼š2025å¹´å…±æœ‰å¹¾æ¬¡éšŠå¤– Challenge åˆä½œ?", a: ["4 æ¬¡", "5 æ¬¡", "6 æ¬¡", "7 æ¬¡"], correct: 2 },
        { story: "ã€Œ æŠ½å±œè£¡æœ‰ä¸€å¼µè¨˜éŒ„è‘—åœ‹ç‹æ­·å¹´ç”Ÿæ—¥å›é¡§çš„æ¸…å–®ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” ç”Ÿæ—¥ç›´æ’­çš„è›‹ç³•éƒ½å¾ˆå¯æ„›ï¼Œä½†æ„Ÿè¦ºä¸å¥½åƒã€‚</span>", q: "å•é¡Œ 15ï¼šå“ªä¸€å¹´çš„ç”Ÿæ—¥ç›´æ’­åšäº† danceology çš„å›é¡§?", a: ["2018", "2019", "2020", "2021"], correct: 3 },
        { story: "ã€Œ æ¡Œä¸Šæ“ºæ”¾åœ‹ç‹è¡¨æ¼”çš„èˆè¹ˆç…§ç‰‡ï¼Œå…¶ä¸­åä¸‰æœˆçš„èˆç™½è‰²çš„å¤–è¢ï¼Œç‰¹åˆ¥åƒæœˆå…‰ä¸‹çš„ä»™å­ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” é€™é¦–æ­Œçš„æ­Œè©çœŸçš„ååˆ†å„ªç¾ã€‚</span>", q: "å•é¡Œ 16ï¼šåä¸‰æœˆçš„èˆèººè‘—éƒ¨åˆ†ï¼Œæç‡¦å¾ä¸Šé¢æ•¸ä¾†ç¬¬å¹¾å±¤?", a: ["1", "2", "3", "4"], correct: 1 },
        { story: "ã€Œ æ›è‘—çš„å¤–å¥—å£è¢‹è£¡å‚³ä¾†äº†å¥³åœ˜çš„æ­Œæ›²æ—‹å¾‹ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” ç¶œè—é–‹å¿ƒè·³è‘—å‰è¼©çš„èˆè¹ˆï¼Œç‰¹åˆ¥å¯æ„›ã€‚</span>", q: "å•é¡Œ 17ï¼šæç‡¦æ˜¯å“ªä¸€å¥³åœ˜çš„ç²‰çµ²?", a: ["Apink", "f(x)", "EXID", "2NE1"], correct: 0 },
        { story: "ã€Œ æœ€å¾Œï¼Œä½ ç™¼ç¾äº†ä¸€æœ¬æ‰‹ç¹ªçš„ã€Šæ°´çºè§€å¯Ÿæ—¥è¨˜ã€‹ã€‚ã€<br><span style='font-size: 13px; color:#fac12f; opacity: 0.8;'>â€”â€” æ„Ÿè¬èµ°åˆ°é€™è£¡ã€‚</span>", q: "ç‰¹åˆ¥å•é¡Œï¼šä»¥ä¸‹å“ªä¸€å€‹ã€Œæ²’æœ‰ã€è¢«æ”¶éŒ„åœ¨hys_921008æ°´çºè§€å¯Ÿæ—¥è¨˜ä¸­?", a: ["é¼“å˜´", "æ‚è‡‰", "éœ²é½’ç¬‘", "çœ¼é¡"], correct: 3 }
    ];

    // 2. ä¼‘æ¯å®¤é¡Œåº« (49é¡Œ)
    const loungeExtraQuestions = [
        { q: "å•é¡Œ 1ï¼šæç‡¦çš„ç”Ÿæ—¥æ˜¯å¹¾è™Ÿ?", a: ["2/10", "2/11", "2/12", "3/11"], correct: 1 },
        { q: "å•é¡Œ 2ï¼šæç‡¦ä¸»æŒçš„SCHOOL OF LOCK æ˜¯å›ºå®šæ¯å€‹æœˆç¬¬å¹¾é€±æ›´æ–°?", a: ["1", "2", "3", "4"], correct: 1 },
        { q: "å•é¡Œ 3ï¼šæç‡¦æˆå¹´é«˜ä¸­ç•¢æ¥­çš„Soloæ›²æ˜¯?", a: ["Wait", "Last Order", "Zero", "High Five"], correct: 2 },
        { q: "å•é¡Œ 4ï¼šã€ŠWaitã€‹èŠ±çµ® MVæ‹æ”æ™‚,æœ‰å¹¾ä½å“¥å“¥åˆ°å ´åŠ æ²¹?", a: ["10", "11", "12", "13"], correct: 2 },
        { q: "å•é¡Œ 5ï¼šæ‹æ” wait MV ä»¥ä¸‹éæ‹æ”åœ°é»?", a: ["é¾è·¯å€", "å»£æ´¥å€", "é¾å±±å€", "æ¾å³¶"], correct: 2 },
        { q: "å•é¡Œ 6ï¼šåœ¨wait MVä¸­æç‡¦çš„è™Ÿç¢¼ç‰Œæ˜¯å¹¾è™Ÿ?", a: ["365", "211", "526", "214"], correct: 0 },
        { q: "å•é¡Œ 7ï¼šWait æ‰“æ­Œèˆå°æ˜¯åœ¨å“ªä¸€å€‹ç¯€ç›®æ”¾é€?", a: ["äººæ°£æ­Œè¬ ", "MUSIC BANK", "M COUNT DOWN", "SHOW CHANPION"], correct: 0 },
        { q: "å•é¡Œ 8ï¼šæç‡¦å¥¶å¥¶çš„é†¬èŸ¹æ˜¯å“ªè£¡çš„é¢¨æ ¼?", a: ["æ…¶å°šé“", "æ±ŸåŸé“", "å¿ æ¸…é“", "å…¨ç¾…é“"], correct: 3 },
        { q: "å•é¡Œ 9ï¼šä¸‹åˆ—å“ªä¸€å€‹ä¸æ˜¯éµäººå¤§å”åº•ä¸‹è—äºº?", a: ["è¶™ä¹™å¥½", "Charles", "ç¢©ç‰", "Leo"], correct: 0 },
        { q: "å•é¡Œ 10ï¼šåœ¨æèŒ‚çServiceä¸­ï¼Œå”±çš„æ˜¯éº¥å¯çš„å“ªé¦–æ­Œæ›²?", a: ["Beat It", "Thriller", "Billie Jean", "Heal The World"], correct: 3 },
        { q: "å•é¡Œ 11ï¼šé«˜é™½å ´Rainèˆå°ç¬¬ä¸€å¤©èˆ‡ç¬¬äºŒå¤©è¡¨æ¼”æœè£æœ‰ä½•è™•ä¸åŒ?", a: ["é‹å­", "æ‰‹å¥—", "è‡‚ç’°", "éº¥å…‹é¢¨"], correct: 2 },
        { q: "å•é¡Œ 12ï¼šæç‡¦åœ¨face the sun åšäº†ç‰™é‘½é€ å‹ï¼Œåšäº†å¹¾é¡†ç‰™?", a: ["2", "3", "4", "5"], correct: 1 },
        { q: "å•é¡Œ 13ï¼šDanceologyä¸­,å’ŒçŸ¥ç§€åœ¨å“ªè£¡æ‹æ”çš„?", a: ["æ±äº¬", "å¤§é˜ª", "é¦–çˆ¾", "åå¤å±‹"], correct: 3 },
        { q: "å•é¡Œ 14ï¼š2025ç¨è‡ªä¸€äººå‡ºåœ‹è¡¨æ¼”æ˜¯å»å“ªè£¡?", a: ["æ—¥æœ¬", "ç¾åœ‹", "æ²™çƒåœ°é˜¿æ‹‰ä¼¯", "æ³•åœ‹"], correct: 2 },
        { q: "å•é¡Œ 15ï¼š2025å¹´å…±æœ‰å¹¾æ¬¡éšŠå¤– Challenge åˆä½œ?", a: ["4 æ¬¡", "5 æ¬¡", "6 æ¬¡", "7 æ¬¡"], correct: 2 },
        { q: "å•é¡Œ 16ï¼šå“ªä¸€å¹´çš„ç”Ÿæ—¥ç›´æ’­åšäº† danceology çš„å›é¡§?", a: ["2018", "2019", "2020", "2021"], correct: 3 },
        { q: "å•é¡Œ 17ï¼šåä¸‰æœˆçš„èˆèººè‘—éƒ¨åˆ†ï¼Œæç‡¦å¾ä¸Šé¢æ•¸ä¾†ç¬¬å¹¾å±¤?", a: ["1", "2", "3", "4"], correct: 1 },
        { q: "å•é¡Œ 18ï¼šæç‡¦æ˜¯å“ªä¸€å¥³åœ˜çš„ç²‰çµ²?", a: ["Apink", "f(x)", "EXID", "2NE1"], correct: 0 },
        { q: "å•é¡Œ 19ï¼šåœ¨<13å°‘å¹´æ¼‚æµè¨˜>çš„è—èƒ½TVç§€çš„Q&Aå•ç­”ä¸­ï¼Œæç‡¦æ’äº†æˆå“¡çš„å¤–è²Œæ’åºï¼Œç¬¬ä¸€åæ˜¯å“ªå€‹æˆå“¡å‘¢ï¼Ÿ", a: ["å°¹æ·¨æ¼¢", "å…¨åœ“ä½‘", "æç‡¦", "æ´ªçŸ¥ç§€"], correct: 2 },
        { q: "å•é¡Œ 20ï¼šGoing rangersæç‡¦ä»£è¡¨è‰²æ˜¯ä»€éº¼?", a: ["ç™½è‰²", "è—è‰²", "ç²‰è‰²", "ç´…è‰²"], correct: 3 },
        { q: "å•é¡Œ 21ï¼šåœ¨GOING SEVENTEEN VERè¾²ç”°å”±å¡æ‹‰OKé€ƒé›¢è¾²ç”°ï¼Œæç‡¦ç¬¬ä¸€æ¬¡çš„åˆ†æ•¸æ˜¯å¹¾åˆ†?", a: ["10", "0", "1", "99"], correct: 1 },
        { q: "å•é¡Œ 22ï¼šä»¥ä¸‹éŸ“åŠ‡æç‡¦æ²’æœ‰å”±è©²åŠ‡çš„ost?", a: ["å·§å…‹åŠ›", "ç„¡äººå³¶çš„Diva", "A-TEEN", "é’æ˜¥ç´€éŒ„"], correct: 3 },
        { q: "å•é¡Œ 23ï¼šåœ¨å°ç¶ å±‹æ™‚æœŸï¼Œæç‡¦èƒŒçš„å°åŒ…åŒ…æ˜¯ä»€éº¼é¡è‰²?", a: ["æ©˜è‰²", "ç´…è‰²", "ç™½è‰²", "é»‘è‰²"], correct: 0 },
        { q: "å•é¡Œ 24ï¼š5TH MINI Album oh my æ‰“æ­Œæ™‚æœŸï¼Œæç‡¦çš„é«®è‰²æ˜¯ä»€éº¼é¡è‰² ?", a: ["é‡‘è‰²", "è—è‰²", "ç²‰è‰²", "é»‘è‰²"], correct: 2 },
        { q: "å•é¡Œ 25ï¼švery nice å›æ­¸æ‰“æ­Œèˆå° æç‡¦çš„special dayæ˜¯åœ¨å“ªå€‹æ”¾é€ç¯€ç›®?", a: ["M COUNT DOWN", "SHOW CHANPION", "MUSIC BANK", "äººæ°£æ­Œè¬ "], correct: 0 },
        { q: "å•é¡Œ 26ï¼šæç‡¦çš„ç”Ÿè‚–æ˜¯å“ªä¸€å€‹?", a: ["è€è™", "é¾", "ç‰›", "å…”å­"], correct: 3 },
        { q: "å•é¡Œ 27ï¼šå‹å¯›é€çµ¦æç‡¦çš„å¤–å¥—ç”Ÿæ—¥ç¦®ç‰©ï¼Œæç‡¦æ˜¯ç©¿è‘—å®ƒå’Œèª°åˆä½œ?", a: ["J-hope", "å¤ªé™½", "å½°å½¬", "ç„¶ä¿Š"], correct: 1 },
        { q: "å•é¡Œ 28ï¼šä¸‹åˆ—ä½•è€…ä¸æ˜¯æç‡¦åœ¨ç¯€ç›®æˆ–æ˜¯ç›´æ’­èªªéçš„åŒæ¬¾é¦™æ°´å‘³é“?", a: ["VETYVERO", "ç“¦å¹³æ¾æµ´å¥³", "ç‹‚é‡éºé¦™", "æ‹¿ç ´å´™ä¹‹æ°´"], correct: 3 },
        { q: "å•é¡Œ 29ï¼šæç‡¦çµ¦è‡ªå·±20æ­²çš„ç”Ÿæ—¥ç¦®ç‰©æ˜¯ä»€éº¼?", a: ["é …éŠ", "æˆ’æŒ‡", "æ‰‹éŠ", "è€³ç’°"], correct: 1 },
        { q: "å•é¡Œ 30ï¼šTRIGGER æ­Œè©ä¸­ï¼Œæç‡¦èˆ‡é¡ä¸­çš„è‡ªå·±ç©çš„æ˜¯ä»€éº¼éŠæˆ²?", a: ["ä¿„ç¾…æ–¯è¼ªç›¤", "å¾·å·æ’²å…‹", "ç‹¼äººæ®º", "éª°å¯¶"], correct: 0 },
        { q: "å•é¡Œ 31ï¼š2024/03/19çš„DINO D-Dayï¼Œæç‡¦ç¬¬ä¸€å€‹åŒè»Šçš„æˆå“¡æ˜¯å“ªä¸€ä½?", a: ["åœ“ä½‘", "å‹å¯›", "ç‰å¥", "ç¢©ç‰"], correct: 3 },
        { q: "å•é¡Œ 32ï¼šSVT Record DINO çš„ What's in my bagä¸­çš„åŒ…åŒ…æ˜¯èª°é€çš„?", a: ["ç¢©ç‰", "æç‡¦çˆ¸çˆ¸", "å‹å¯›", "é †æ¦®"], correct: 2 },
        { q: "å•é¡Œ 33ï¼šæç‡¦æ˜¯åœ¨å“ªåƒåˆ°DINO æ¼¢å ¡çš„?", a: ["é¦™æ¸¯", "æ›¼è°·", "æ¾³é–€", "èˆŠé‡‘å±±"], correct: 2 },
        { q: "å•é¡Œ 34ï¼šæ·¨æ¼¢é€æç‡¦å°æ°´çºç©å¶çš„æ™‚å€™ï¼Œä»–å€‘æ­£å› å“ªå€‹ç¯€ç›®åœ¨åœ‹å¤–æ—…è¡Œä¸­?", a: ["æœæ‹œå¤§å¯Œç¿", "ç¾å¥½çš„ä¸€å¤©", "NANA TOUR", "é˜¿æ‹‰ä¸ç¥ç‡ˆ"], correct: 3 },
        { q: "å•é¡Œ 35ï¼šæç‡¦å’Œé‡‘ç‰å¥å°±è®€é«˜ä¸­æ™‚ï¼Œå·®äº†å¤šå°‘å¹´ç´š?", a: ["1", "2", "3", "0"], correct: 0 },
        { q: "å•é¡Œ 36ï¼šæŒ‘é£Ÿçš„æç‡¦æ˜¯è¨å­ä¸‹é¢å“ªä¸€å€‹é£Ÿç‰©å‘¢?", a: ["é¦™èœ", "å—ç“œ", "ç´«è˜‡è‘‰", "å°é»ƒç“œ"], correct: 3 },
        { q: "å•é¡Œ 37ï¼šåœ¨2024å¹´åº•è‡³2025å¹´åˆçš„é ’çå…¸ç¦®ï¼Œæç‡¦æ˜¯åœ¨å“ªä¸€å€‹èˆå°è² è²¬Dance Break ?", a: ["MAMA", "é‡‘å”±ç‰‡", "AAA", "TMA"], correct: 0 },
        { q: "å•é¡Œ 38ï¼š2018çš„IDEAL CUT æç‡¦çš„ SOLO èˆå°æ­Œæ›²æ˜¯ä¸‹åˆ—å“ªä¸€å€‹?", a: ["THE REAL THING", "EVERY TIME", "ZERO(HERO)", "LAST ORDER"], correct: 1 },
        { q: "å•é¡Œ 39ï¼šåœ¨é–ƒè€€äº”å‘¨å¹´ä¸­ï¼Œæç‡¦æ‰®æ¼”å“ªä½æˆå“¡?", a: ["çŸ¥å‹³", "å‹å¯›", "é †æ¦®", "ç¢©ç‰"], correct: 3 },
        { q: "å•é¡Œ 40ï¼šåœ¨GOING SEVENTEEN æŠŠç™½é£¯åƒå¾—è¶…ç¾å‘³çš„å®Œç¾æ–¹æ³•ï¼Œæç‡¦æ˜¯å¦‚ä½•åšçš„?", a: ["æ¼”é£¯é£¯è‹±é›„", "é‚Šå”±troté‚Šåƒé£¯", "å’Œå®¶äººåƒé£¯", "æ·‹æ°´åƒé£¯"], correct: 2 },
        { q: "å•é¡Œ 41ï¼šGOING SEVENTEEN DON'T LIE 3 æç‡¦çš„è§’è‰²æ˜¯å“ªä¸€å€‹ ?", a: ["æ®ºæ‰‹", "é†«ç”Ÿ", "å¹³æ°‘", "è­¦å¯Ÿ"], correct: 1 },
        { q: "å•é¡Œ 42ï¼šGOING SEVENTEEN è«‡è©±èšé¤æœƒï¼Œæç‡¦èªªä¸‹è¼©å­æƒ³ç•¶ä»€éº¼ ?", a: ["äººé¡", "æé¾", "æ°´çº", "å°é³¥"], correct: 3 },
        { q: "å•é¡Œ 43ï¼šGOING SEVENTEEN å…¨çŸ¥å¹²é è¦–è§’æ‡²ç½°ä¸­ï¼Œæç‡¦çš„å¾µæ–‡æ¯”è³½èª°ç²å¾—ç¬¬ä¸€å?", a: ["æ·¨æ¼¢", "å‹å“²", "çŸ¥ç§€", "ä¿Šè¼"], correct: 2 },
        { q: "å•é¡Œ 44ï¼šNANA BNBä¸­ï¼Œæç‡¦æ˜¯ä½å¹¾äººæˆ¿?", a: ["1", "2", "3", "4"], correct: 3 },
        { q: "å•é¡Œ 45ï¼šNANA BNBä¸­ï¼Œæç‡¦æ˜¯é å“ªä½æˆå“¡å®ŒæˆçŒœå°ä¸€åˆ†é˜?", a: ["å‹å“²", "æ˜æµ©", "çŸ¥å‹³", "ä¿Šè¼"], correct: 1 },
        { q: "å•é¡Œ 46ï¼šå‡ºå·®åäº”å¤œ HYBE ç¯‡ç¬¬ä¸€å€‹éŠæˆ²HYBEèŠ±é–‹äº†ï¼Œæç‡¦å¾—åˆ°ä»€éº¼?", a: ["å’–å•¡", "ç”œç“œ", "æ±½æ°´", "è¥¿ç“œ"], correct: 3 },
        { q: "å•é¡Œ 47ï¼šDINO TTT å¯«çœŸé›†ç¸½å…±æœ‰å¹¾å¥—ä¸åŒé€ å‹(é»‘è¥¿è£é‚£é‚Šç®—ä¸€å¥—)?", a: ["2", "3", "4", "5"], correct: 3 },
        { q: "å•é¡Œ 48ï¼šåœ¨è¨­å®šMINITEEN ç‡¦å™ å“©æ™‚ï¼Œæ°´çºåœ‹ç‹å–œæ­¡åƒä»€éº¼?", a: ["è¾£ç‚’å¹´ç³•", "é¦¬éˆ´è–¯æ’éª¨æ¹¯", "æµ·å¸¶æ¹¯", "ç‚¸é›"], correct: 1 },
        { q: "å•é¡Œ 49ï¼šå“ˆåˆ©æ³¢ç‰¹èšæœƒï¼Œæç‡¦æ˜¯å“ªä¸€å€‹å­¸é™¢çš„?", a: ["æ–‡é›·å…‹å‹", "å²èŠå“²æ—", "è‘›èŠåˆ†å¤š", "èµ«å¤«å¸•å¤«"], correct: 2 },
        { q: "å•é¡Œ 50ï¼šæç‡¦æ˜¯å“ªä¸€å€‹å°åˆ†éšŠéšŠé•·?", a: ["JxW", "HxW", "DxS", "CxM"], correct: 0 }
    ];

    window.onload = function() {
        const now = new Date().getTime();

        // ğŸš« è‡ªå‹•é—œç«™é‚è¼¯
        if (now > COMP_END) {
            document.body.innerHTML = `
                <div style="background:#1a1a1a; color:#fff; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; font-family:sans-serif;">
                    <h1 style="color:#ffd026; font-size:48px;">æ´»å‹•å·²çµæŸ</h1>
                    <p style="font-size:18px; color:#888;">æ„Ÿè¬æ‰€æœ‰å­æ°‘çš„åƒèˆ‡ï¼æ°´çºåœ‹ç‹çš„æ™‚è£é€±ä¹‹æ—…åœ“æ»¿é”æˆã€‚</p>
                    <button onclick="window.open('https://docs.google.com/spreadsheets/d/e/2PACX-1vRXulW2YWAihp7nLnQskERNxA6JNS3L5Op3eKXX9BlXj4wYnuhT_AnAH3sGqtPv8TnHo8QHh0d6NZ0L/pubhtml?gid=770811598&single=true')" 
                            style="margin-top:30px; padding:10px 20px; background:#ffd026; border:none; border-radius:5px; cursor:pointer; font-weight:bold;">
                        ğŸ“Š æŸ¥çœ‹æœ€çµ‚æ’è¡Œæ¦œ
                    </button>
                </div>`;
            return;
        }

        renderGallery();
        updateCoinDisplay();
        fetchStockData();
        checkMarketStatus();
        if (isDeveloper) addDevTool();
    };

    function renderGallery() {
        const gallery = document.getElementById('magazine-gallery');
        for (let i = 1; i <= 10; i++) {
            const card = document.createElement('div');
            card.className = 'magazine-card';
            card.id = `card-${i}`;
            card.onclick = () => handlePurchase(i);
            card.innerHTML = `<div id="badge-${i}" class="sold-out-badge">SOLD OUT</div><img src="${GITHUB_ASSETS}cloth${i}.jpg"><div class="card-info"><span class="buy-tag">CLOTH #${i}</span><span class="stock-label">å‰©é¤˜æ•¸é‡ï¼š<span id="stock-${i}" class="stock-count">--</span></span></div>`;
            gallery.appendChild(card);
        }
    }

    async function fetchStockData() {
        const btn = document.getElementById('refresh-data');
        try {
            const response = await fetch(`${CSV_URL}&t=${new Date().getTime()}`);
            const data = await response.text();
            const rows = data.split('\n').map(row => row.split(','));
            for (let i = 1; i <= 10; i++) {
                if (rows[i]) {
                    const currentStock = parseInt(rows[i][2]);
                    document.getElementById(`stock-${i}`).innerText = currentStock;
                    if (currentStock <= 0) {
                        document.getElementById(`card-${i}`).classList.add('sold-out');
                        document.getElementById(`badge-${i}`).style.display = 'block';
                    }
                }
            }
        } catch (e) { console.error("Stock error"); }
    }

    function checkMarketStatus() {
        const btn = document.getElementById('floating-market-btn');
        const now = new Date().getTime();
        if (!isDeveloper && now < OPEN_DATE) { btn.style.display = 'none'; return; }

        btn.style.display = 'block';
        const isPractice = localStorage.getItem('dino_cleared_market') === 'true';
        if (isPractice) {
            btn.innerHTML = "ğŸ¦¦ ä¼‘æ¯å®¤ âŸ¡";
            btn.style.background = "#1a1a1a";
            btn.style.color = "#ffd026";
            btn.style.border = "1px solid #ffd026";
        }
    }

    function openMarket() {
        const isPractice = localStorage.getItem('dino_cleared_market') === 'true';
        if (!isPractice) {
            if (!confirm("âš ï¸ è­¦å‘Šï¼šé€²å…¥é»‘å¸‚ä¸­é€”é€€å‡ºï¼Œé­šå¹£å°‡é‡ç½®ï¼ä¹Ÿç„¡æ³•å†æ¬¡é€²å…¥ï¼Œç¢ºå®šé€²å…¥ï¼Ÿ")) return;
            localStorage.setItem('dino_market_entered', 'true');
        }
        document.getElementById('black-market-overlay').style.display = 'block';
        currentQuiz = -1; temporaryCoins = 0; showQuestion();
    }

    function showQuestion() {
        const storyP = document.getElementById('quiz-story');
        const questionP = document.getElementById('quiz-question');
        const optionsDiv = document.getElementById('quiz-options');
        const isPractice = localStorage.getItem('dino_cleared_market') === 'true';
        const currentDataPool = isPractice ? loungeExtraQuestions : questions;
        const now = new Date().getTime();
        const isCompTime = (now >= COMP_START && now <= COMP_END);

        document.getElementById('quiz-orig-coins').innerText = coins;
        document.getElementById('quiz-temp-coins').innerText = temporaryCoins;

        if (currentQuiz >= currentDataPool.length) {
            document.getElementById('quiz-coin-board').style.display = 'none';
            if (isPractice) {
                const leaderboard = isCompTime ? "https://docs.google.com/spreadsheets/d/e/2PACX-1vRXulW2YWAihp7nLnQskERNxA6JNS3L5Op3eKXX9BlXj4wYnuhT_AnAH3sGqtPv8TnHo8QHh0d6NZ0L/pubhtml?gid=770811598&single=true" : "https://docs.google.com/spreadsheets/d/e/2PACX-1vQwkbg05CbAg70XRAKLAIPv7VlNlCj4175NA5q8NkIHd8Xogdl6hdngca8Rc3CS3484pBhOG5k-n2Nl/pubhtml?gid=1871742235&single=true";
                const verifyCode = (temporaryCoins + 211) * 13;
                const formUrl = isCompTime 
                    ? `https://docs.google.com/forms/d/e/1FAIpQLSdVxUqssvJQTRf89SvkIJ1cfR0UXs6vv0DBypK-X2GMYcjrvQ/viewform?usp=pp_url&entry.1663061856=${temporaryCoins}&entry.872829839=${verifyCode}`
                    : `https://docs.google.com/forms/d/e/1FAIpQLSfrUlyB14ebD9DKTFJ3GlHFynv2alSnuoXppOT7P1Fs5mB4kg/viewform?usp=pp_url&entry.999984790=${temporaryCoins}`;

                storyP.innerHTML = isCompTime ? "<h2 style='color:#ff4b4b;'>ğŸ† 0211 ç«¶è³½æ¨¡å¼å®Œæˆï¼</h2>" : "<h2>æŒ‘æˆ°çµæŸ</h2>";
                optionsDiv.innerHTML = `
                    <button class="option-btn" style="background:#ffd026; color:#000; font-weight:bold; text-align:center;" onclick="window.open('${formUrl}')">${isCompTime ? 'ğŸ¥‡ ç™»è¨˜ç«¶è³½åˆ†æ•¸' : 'ğŸ† ç™»è¨˜åˆ†æ•¸ / é¡Œç›®æŠ•ç¨¿'}</button>
                    <button class="option-btn" style="background:#fff; color:#000; font-weight:bold; text-align:center;" onclick="window.open('${leaderboard}')">ğŸ“Š æŸ¥çœ‹æ’è¡Œæ¦œ</button>
                    <button class="option-btn" style="text-align:center;" onclick="location.reload()">â†©ï¸ å›åˆ°å•†åº—é¦–é </button>`;
                questionP.innerHTML = `<div style="background:#fff; padding:20px; border-radius:15px; color:#000; margin-top:20px;">å¾—åˆ†ï¼š${temporaryCoins} ğŸŸ${isCompTime ? `<br><small style="color:#999">é©—è­‰ç¢¼ï¼š${verifyCode}</small>` : ''}</div>`;
            } else {
                storyP.innerHTML = "ä½ æ¨é–‹æœè£åº—çš„å¾Œé–€ï¼Œç™¼ç¾äº†è£ç¸«å¸«åœ¨é‚£ç­‰è‘—ä½ ã€‚";
                optionsDiv.innerHTML = `<button class="option-btn" style="background:#ffd026; color:#000; font-weight:bold; text-align:center;" onclick="finalizeMarketCoins()">é ˜å–ä¸¦ç™»è¨˜</button>`;
                questionP.innerHTML = `<div style="background:#fff; padding:20px; border-radius:15px; color:#000; margin-top:20px;">ç¸½è¨ˆç²å¾—ï¼š${coins + temporaryCoins} ğŸŸ</div>`;
            }
            return;
        }

        if (currentQuiz === -1) {
            storyP.innerHTML = isCompTime && isPractice ? "<span style='color:#ff4b4b; font-size:24px; font-weight:bold;'>ğŸ”¥ DINO 0211 ç«¶è³½æ¨¡å¼ ğŸ”¥</span>" : "äº†è§£æç‡¦å„ç¨®é¢è²Œçš„ç¢ç‰‡...";
            questionP.innerText = isCompTime && isPractice ? "æŒ‘æˆ°ç¬¬ä¸€åé ˜å–ç”Ÿæ—¥å•†å“ï¼" : "æº–å‚™å¥½é–‹å§‹äº†å—ï¼Ÿ";
            optionsDiv.innerHTML = `<button class="option-btn" style="text-align:center; background:#ffd026; color:#000; font-weight:bold;" onclick="currentQuiz=0; showingStory=false; showQuestion();">é–‹å§‹æŒ‘æˆ°</button>`;
            return;
        }

        const data = currentDataPool[currentQuiz];
        if (isPractice || !showingStory) {
            storyP.innerHTML = `<div style="color:#888; font-size:14px;">Q${currentQuiz + 1} / ${currentDataPool.length}</div>`;
            questionP.innerText = data.q;
            optionsDiv.innerHTML = '';
            data.a.forEach((txt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = `${String.fromCharCode(65 + idx)}. ${txt}`;
                btn.onclick = () => {
                    if (idx === data.correct) { temporaryCoins += 2; alert("æ­£ç¢ºï¼"); }
                    else { alert("ç­”éŒ¯äº†..."); }
                    currentQuiz++; showingStory = true; showQuestion();
                };
                optionsDiv.appendChild(btn);
            });
        } else {
            storyP.innerHTML = `<div style="font-size:20px; color:#ffd026; line-height:1.6; margin:40px 0;"> ${data.story} </div>`;
            questionP.innerText = "";
            optionsDiv.innerHTML = `<button class="option-btn" style="text-align:center; background:#444;" onclick="showingStory=false; showQuestion();">æŸ¥çœ‹æŒ‘æˆ°é¡Œ â†’</button>`;
        }
    }

    function finalizeMarketCoins() {
        coins += temporaryCoins;
        localStorage.setItem('dino_coins', coins);
        localStorage.setItem('dino_cleared_market', 'true');
        updateCoinDisplay();
        const verifyCode = (coins * 17) + 211;
        window.location.href = `https://docs.google.com/forms/d/e/1FAIpQLScv7hqzJEcDXYX7BpIEfs5c2NmNfLOpUnWIxa1blxE9gU9afw/viewform?usp=pp_url&entry.94782409=${coins}&entry.1993098186=${verifyCode}`;
    }

    function handlePenaltyClose() {
        if (confirm("é›¢é–‹é»‘å¸‚ï¼Œé­šå¹£å°‡æ­¸å›åˆå§‹å€¼ (3)ï¼ç¢ºå®šå—ï¼Ÿ")) {
            localStorage.setItem('dino_coins', 3); location.reload();
        }
    }

    function handlePurchase(itemId) {
        const now = new Date().getTime();
        const stock = parseInt(document.getElementById(`stock-${itemId}`).innerText);
        if (now < OPEN_DATE && !isDeveloper) { alert("ğŸ”’ 2/8 10:00 æ­£å¼é–‹å•Ÿã€‚"); return; }
        if (stock <= 0) { alert("å·²å”®ç½„"); return; }
        if (coins < 3) { alert("é­šå¹£ä¸è¶³"); return; }
        if (confirm(`æ¶ˆè€— 3 é­šå¹£è³¼è²· #${itemId}?`)) {
            coins -= 3; localStorage.setItem('dino_coins', coins); updateCoinDisplay();
            window.location.href = `https://docs.google.com/forms/d/e/1FAIpQLScWck40_ZDTAutZ6PT6cq3koXbHUyplsl8lcoASe2ACTlZXOg/viewform?usp=pp_url&entry.94643144=%23${itemId}`;
        }
    }

    function updateCoinDisplay() { document.getElementById('coin-count').innerText = coins; }

    function addDevTool() {
        const devBtn = document.createElement('div');
        devBtn.className = 'dev-badge'; devBtn.innerText = 'ğŸ› ï¸ DEV';
        devBtn.onclick = () => {
            let cmd = prompt("1.+3 / 2.Reset / 3.Finish");
            if (cmd==='1') { coins+=3; localStorage.setItem('dino_coins', coins); updateCoinDisplay(); }
            if (cmd==='2') { localStorage.clear(); location.reload(); }
            if (cmd==='3') { currentQuiz = loungeExtraQuestions.length; showQuestion(); }
        };
        document.body.appendChild(devBtn);
    }
</script>
</body>
</html>



