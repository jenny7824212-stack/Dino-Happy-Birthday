<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DINO'S ATELIER | MAGAZINE SHOP</title>
    <style>
        body { 
            background-color: #FAF9F6; 
            color: #333333; 
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; 
            margin: 0; 
            padding-bottom: 100px; 
        }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; text-align: center; }

        /* 2. ç‹€æ…‹æ¬„æ”¹ç‚ºç´”ç™½åŠé€æ˜ */
        .status-bar { 
            position: fixed; top: 0; width: 100%; 
            background: rgba(255, 255, 255, 0.9); 
            padding: 12px 0; z-index: 1000; 
            border-bottom: 1px solid #eee;
            display: flex; justify-content: space-around; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .back-home-btn { 
            background: transparent; color: #555; border: 1px solid #ccc; 
            padding: 5px 15px; border-radius: 20px; text-decoration: none; font-size: 13px; 
        }
        .back-home-btn:hover { border-color: #d4af37; color: #d4af37; }

        /* é­šå¹£é¡¯ç¤ºåœ¨æ·ºè‰²åº•å»ºè­°ç”¨æ·±è‰² */
        .coin-display { font-size: 16px; font-weight: bold; color: #333; }

        .header-section { margin-top: 100px; margin-bottom: 30px; }
        .price-tag { color: #b8860b !important; font-weight: bold; font-size: 14px; }

        /* 3. ç…§ç‰‡å¡ç‰‡æ”¹ç‚ºç´”ç™½åº•ï¼‹æ·ºé™°å½± */
        .magazine-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; padding: 10px; }
        .magazine-card { 
            background: #ffffff; 
            border-radius: 12px; 
            overflow: hidden; 
            border: 1px solid #eee; 
            transition: 0.3s; 
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* è¼•å¾®é™°å½± */
        }
        .magazine-card:hover { transform: translateY(-8px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-color: #d4af37; }
        .magazine-card img { width: 100%; height: auto; display: block; }
        
        .card-info { padding: 15px; background: #ffffff; border-top: 1px solid #eee; text-align: center; }
        .buy-tag { color: #333; font-weight: bold; }

        /* 4. é»‘å¸‚æŒ‘æˆ°æŒ‰éˆ•ç¶­æŒé¡¯çœ¼ç´…è‰² */
        #floating-market-btn { position: fixed; bottom: 30px; right: 30px; background: #ff4b4b; color: white; border: none; padding: 15px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 1500; display: none; box-shadow: 0 4px 15px rgba(255, 75, 75, 0.3); }

        /* æ¸¬é©—å½ˆçª— (é»‘å¸‚é€šå¸¸ç¶­æŒæš—è‰²ç³»è¼ƒæœ‰æ°£æ°›) */
        #black-market-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; overflow-y:auto; }
        .quiz-container { max-width: 600px; margin: 40px auto; text-align: center; padding: 20px; color: white; }
        .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: #252525; color: #fff; border: 1px solid #444; border-radius: 10px; cursor: pointer; text-align: left; }
    </style>
</head>
<body>

<div class="status-bar">
    <a href="index.html" class="back-home-btn">â† å›åˆ°é¦–é </a>
    <div class="coin-display">æŒæœ‰é­šå¹£: <span id="coin-count">0</span> ğŸŸ</div>
</div>

<div class="container">
    <div class="header-section">
        <h2 style="letter-spacing: 4px; font-weight: 900;">[ DINO 27TH BIRTHDAY ]</h2>
        <p>é»æ“Šä¸‹æ–¹ç…§ç‰‡å³å¯é€²è¡Œè¨‚è³¼ç™»è¨˜</p>
        <p class="price-tag">æ¯ä¸€æœ¬éœ€æ¶ˆè€— 3 é­šå¹£</p>
    </div>
    <div id="magazine-gallery" class="magazine-gallery"></div>
</div>

<button id="floating-market-btn" onclick="openMarket()">{ é€²å…¥é»‘å¸‚æŒ‘æˆ° }</button>

<div id="black-market-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.98); z-index:2000; overflow-y:auto;">
    <div class="quiz-container">
        <div id="quiz-coin-board" style="display: flex; justify-content: space-between; background: #ffffff; padding: 15px 25px; border-radius: 15px; margin-bottom: 25px; color: #000;">
            <div style="text-align: left;"><span style="color: #888; font-size: 12px; font-weight: bold;">åŸæœ¬é­šå¹£</span><br><span id="quiz-orig-coins" style="font-size: 20px; font-weight: 900;">0</span> ğŸŸ</div>
            <div style="text-align: right;"><span style="color: #666; font-size: 12px; font-weight: bold;">ç²å¾—çå‹µ</span><br><span id="quiz-temp-coins" style="font-size: 20px; font-weight: 900;">0</span> ğŸŸ</div>
        </div>
        <p id="quiz-story" style="color:#ffd700; font-style:italic; margin-bottom:10px;"></p>
        <p id="quiz-question" style="font-size:22px; font-weight:bold; margin-bottom:30px; color:#fff;"></p>
        <div id="quiz-options"></div>
        <p id="quiz-leave" onclick="handlePenaltyClose()" style="margin-top:50px; color:#888; cursor:pointer; text-decoration:underline;">LEAVE MARKET</p>
    </div>
</div>

<script>
    const OPEN_DATE = new Date("Feb 08, 2026 10:00:00").getTime();
    const BASE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLScWck40_ZDTAutZ6PT6cq3koXbHUyplsl8lcoASe2ACTlZXOg/viewform?usp=pp_url";
    const BLACK_MARKET_BASE_URL = "https://docs.google.com/forms/d/e/1FAIpQLScv7hqzJEcDXYX7BpIEfs5c2NmNfLOpUnWIxa1blxE9gU9afw/viewform?usp=pp_url";
    const GITHUB_USER = "jenny7824212-stack"; 
    const GITHUB_REPO = "Dino-Happy-Birthday";
    const GITHUB_BRANCH = "main"; 

    let coins = parseInt(localStorage.getItem('dino_coins')) || 3;
    let temporaryCoins = 0;
    let currentQuiz = -1;

    const urlParams = new URLSearchParams(window.location.search);
    const isDeveloper = urlParams.get('dev') === 'otter921008';

    const questions = [
        { story: "ã€Œåœ‹ç‹çš„ç”Ÿæ—¥?ã€", q: "å•é¡Œ 1ï¼šæç‡¦çš„ç”Ÿæ—¥æ˜¯å¹¾è™Ÿ?", a: ["2/10", "2/11", "2/12", "3/11"], correct: 1 },
        { story: "ã€Œé¡å­è£¡æ‰€ç…§çš„æˆ‘ååˆ†é™Œç”Ÿã€‚ã€", q: "å•é¡Œ 2ï¼šæç‡¦æˆå¹´é«˜ä¸­ç•¢æ¥­çš„Soloæ›²æ˜¯?", a: ["Wait", "Last Order", "Zero", "High Five"], correct: 2 },
        { story: "ã€Œä½†ä½ ä¸æ˜¯ä¸€å€‹äººã€‚ã€", q: "å•é¡Œ 3ï¼šã€ŠWaitã€‹èŠ±çµ® MVæ‹æ”æ™‚,æœ‰å¹¾ä½å“¥å“¥åˆ°å ´åŠ æ²¹?", a: ["10", "11", "12", "13"], correct: 2 },
        { story: "ç¶“éä¸€æ’å±•ç¤ºæ¶,ä¸Šé¢æ”¾è‘—æ¼”å”±æœƒæœè£ã€‚", q: "å•é¡Œ 4ï¼šSEVENTEEN RIGHT HEREæ¼”å”±æœƒã€ŒéŸ“åœ‹å ´ã€Rainèˆå°ç¬¬ä¸€å¤©èˆ‡ç¬¬äºŒå¤©è¡¨æ¼”æœ‰ä½•ä¸åŒ?", a: ["é‹å­", "æ‰‹å¥—", "è‡‚ç’°", "éº¥å…‹é¢¨"], correct: 2 },
        { story: "ç§‹å¤©çš„è½è‘‰å¥½å¤šã€‚", q: "å•é¡Œ 5ï¼šDino Danceologyä¸­,å’ŒçŸ¥ç§€ä¸€èµ·åœ¨å“ªè£¡æ‹æ”èˆè¹ˆçš„?", a: ["æ±äº¬", "å¤§é˜ª", "é¦–çˆ¾", "åå¤å±‹"], correct: 3 },
        { story: "ã€Œç¬¬ä¸€æ¬¡èº«æ—æ²’æœ‰æˆå“¡ç«™ä¸Šäº†ä½•è™•çš„åœ‹éš›èˆå°?ã€", q: "å•é¡Œ 6ï¼šæç‡¦ä»Šå¹´ç¨è‡ªä¸€äººå‡ºåœ‹è¡¨æ¼”,æ˜¯å»å“ªè£¡?", a: ["æ—¥æœ¬", "ç¾åœ‹", "æ²™çƒåœ°é˜¿æ‹‰ä¼¯", "æ³•åœ‹"], correct: 2 },
        { story: "ã€Œå»å¹´,æç‡¦èµ°å‡ºäº†å¤šå°‘æ¬¡ã€éšŠä¼ä»¥å¤–ã€?ã€", q: "å•é¡Œ 7ï¼šæç‡¦ 2025å¹´å…±æœ‰å¹¾æ¬¡ã€ŒéšŠå¤–ã€åˆä½œ?", a: ["4 æ¬¡", "5 æ¬¡", "6 æ¬¡", "7 æ¬¡"], correct: 2 },
        { story: "DINO'S DANCEOLOGY Reaction", q: "å•é¡Œ 8ï¼šæ˜¯å“ªä¸€å¹´çš„ç”Ÿæ—¥ç›´æ’­ï¼Œæç‡¦åšäº† danceology çš„å›é¡§?", a: ["2018", "2019", "2020", "2021"], correct: 3 },
        { story: "åœ¨æœˆå…‰ä¹‹ä¸‹è·³èˆï¼Œç›®å…‰åªæ³¨è¦–è‘—ä½ ã€‚", q: "å•é¡Œ 9ï¼šLilili Yabbay åä¸‰æœˆçš„èˆ å‰é¢èººè‘—éƒ¨åˆ†ï¼Œæç‡¦å¾ä¸Šé¢æ•¸ä¾†ç¬¬å¹¾å±¤?", a: ["1", "2", "3", "4"], correct: 1 },
        { story: "æ˜¯è¢«å“¥å“¥å€‘åœç¹çš„å¿™å…§å•Š~", q: "å•é¡Œ 10ï¼š2020å¹´æˆå“¡æ…¶ç¥ç”Ÿæ—¥ï¼Œé€çš„èŠ±ä»£è¡¨æç‡¦çš„æ˜¯ä»€éº¼é¡è‰²?", a: ["é»ƒè‰²", "è—è‰²", "ç´…è‰²", "ç²‰è‰²"], correct: 0 },
        { story: "ã€ŒDinoå•Š å†ä¾†ä¸€é¡Œ100åˆ†çš„å§^^ã€", q: "å•é¡Œ 11ï¼šæç‡¦æ˜¯å“ªä¸€å¥³åœ˜çš„ç²‰çµ²?", a: ["Apink", "f(x)", "EXID", "2NE1"], correct: 0 },
        { story: "å°é¢å¯«è‘—â€”â€”ã€Šæ°´çºè§€å¯Ÿæ—¥è¨˜ã€‹", q: "å•é¡Œ 12ï¼šä»¥ä¸‹å“ªä¸€å€‹ã€Œæ²’æœ‰ã€è¢«æ”¶éŒ„åœ¨ã€Šæ°´çºè§€å¯Ÿæ—¥è¨˜ã€‹ä¸­?", a: ["é¼“å˜´", "æ‚è‡‰", "éœ²é½’ç¬‘", "çœ¼é¡"], correct: 3 },
        { story: "ã€Œæœ‰ä¸€å€‹é¡è‰²ååˆ†è€€çœ¼ã€‚ã€", q: "å•é¡Œ 13ï¼šæ°´çºè£ç¸«å¸«æœ€å–œæ­¡æç‡¦çš„å“ªä¸€å€‹é«®è‰²?", a: ["é»‘è‰²", "é‡‘è‰²", "ç´…è‰²", "è—è‰²"], correct: 3 }
    ];

    window.onload = function() {
        const gallery = document.getElementById('magazine-gallery');
        for (let i = 1; i <= 12; i++) {
            const card = document.createElement('div');
            card.className = 'magazine-card';
            card.onclick = () => handlePurchase(i);
            const img = document.createElement('img');
            img.src = `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/${GITHUB_BRANCH}/cloth${i}.jpg`;
            const info = document.createElement('div');
            info.className = 'card-info';
            info.innerHTML = `<span style="color:#fff; font-weight:bold;">CLOTH #${i}</span>`;
            card.appendChild(img);
            card.appendChild(info);
            gallery.appendChild(card);
        }
        updateCoinDisplay();
        checkMarketStatus();
        if (isDeveloper) addDevTool();
    };

    function updateCoinDisplay() {
        document.getElementById('coin-count').innerText = coins;
    }

    function handlePurchase(itemId) {
        const now = new Date().getTime();
        if (now < OPEN_DATE && !isDeveloper) { alert("ğŸ”’ 2/8 10:00 æ­£å¼é–‹å•Ÿã€‚"); return; }
        if (coins < 3) { alert("âš ï¸ é­šå¹£ä¸è¶³ 3 æšï¼è«‹å‰å¾€é»‘å¸‚æŒ‘æˆ°ã€‚"); return; }
        if (confirm(`æ¶ˆè€— 3 é­šå¹£è³¼è²· [ CLOTH #${itemId} ]ï¼Ÿ`)) {
            coins -= 3;
            localStorage.setItem('dino_coins', coins);
            updateCoinDisplay();
            window.location.href = `${BASE_FORM_URL}&entry.94643144=%23${itemId}`;
        }
    }

    function checkMarketStatus() {
        const btn = document.getElementById('floating-market-btn');
        if (isDeveloper || new Date().getTime() >= OPEN_DATE) btn.style.display = 'block';
        if (localStorage.getItem('dino_market_entered') === 'true') {
            btn.innerHTML = "{ æŒ‘æˆ°å·²çµæŸ }";
            btn.style.background = "#333";
            btn.onclick = () => alert("æŒ‘æˆ°æ©Ÿæœƒåªæœ‰ä¸€æ¬¡ã€‚");
        }
    }

    function openMarket() {
        if (localStorage.getItem('dino_market_entered') === 'true') return;
        if (!confirm("âš ï¸ è­¦å‘Šï¼šé€²å…¥é»‘å¸‚è‹¥ä¸­é€”é€€å‡ºï¼Œé­šå¹£å°‡é‡ç½®ç‚º 3 å€‹ï¼ç¢ºå®šé€²å…¥ï¼Ÿ")) return;
        localStorage.setItem('dino_market_entered', 'true');
        checkMarketStatus();
        document.getElementById('black-market-overlay').style.display = 'block';
        currentQuiz = -1; temporaryCoins = 0; showQuestion();
    }

    function showQuestion() {
        const storyP = document.getElementById('quiz-story');
        const questionP = document.getElementById('quiz-question');
        const optionsDiv = document.getElementById('quiz-options');
        document.getElementById('quiz-orig-coins').innerText = coins;
        document.getElementById('quiz-temp-coins').innerText = temporaryCoins;

        if (currentQuiz === -1) {
            storyP.innerText = "ä¾†çœ‹çœ‹ä½ å°æç‡¦äº†è§£å¤šå°‘...";
            questionP.innerHTML = "è£ç¸«å¸«çš„æŒ‘æˆ°ï¼š13 é“é¡Œ";
            optionsDiv.innerHTML = `<button class="option-btn" style="text-align:center;" onclick="currentQuiz=0; showQuestion();">é–‹å§‹æ¸¬é©—</button>`;
            return;
        }
        if (currentQuiz >= questions.length) {
            document.getElementById('quiz-coin-board').style.display = 'none';
            const finalCoins = coins + temporaryCoins;
            questionP.innerHTML = `<div style="background:#fff;padding:20px;border-radius:15px;color:#000;">æŒ‘æˆ°æˆåŠŸï¼<br>ç²å¾—çå‹µï¼š+${temporaryCoins} ğŸŸ<br>çµç®—ï¼š${finalCoins} ğŸŸ</div>`;
            optionsDiv.innerHTML = `<button class="option-btn" style="background:#ffd700;color:#000;font-weight:bold;text-align:center;" onclick="finalizeMarketCoins()">ç¢ºèªé ˜å–ä¸¦ç™»è¨˜</button>`;
            return;
        }
        const data = questions[currentQuiz];
        storyP.innerText = data.story;
        questionP.innerText = data.q;
        optionsDiv.innerHTML = '';
        data.a.forEach((txt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = `${String.fromCharCode(65 + idx)}. ${txt}`;
            btn.onclick = () => {
                if (idx === data.correct) { temporaryCoins += 2; alert("æ­£ç¢ºï¼+2 é­šå¹£"); }
                else { alert("ç­”éŒ¯äº†...æ²’é—œä¿‚ç¹¼çºŒæŒ‘æˆ°ã€‚"); }
                currentQuiz++; showQuestion();
            };
            optionsDiv.appendChild(btn);
        });
    }

    // é‡é»åŠŸèƒ½ï¼šä¸­é€”é€€å‡ºæ‡²ç½°
    function handlePenaltyClose() {
        if (confirm("âš ï¸ ç¾åœ¨é›¢é–‹ï¼Œé­šå¹£å°‡ç›´æ¥å›æ­¸ç‚º 3 å€‹ï¼ˆåˆå§‹å€¼ï¼‰ï¼ç¢ºå®šå—ï¼Ÿ")) {
            coins = 3;
            localStorage.setItem('dino_coins', coins);
            updateCoinDisplay();
            document.getElementById('black-market-overlay').style.display = 'none';
        }
    }

    function finalizeMarketCoins() {
        const finalCoins = coins + temporaryCoins;
        coins = finalCoins;
        localStorage.setItem('dino_coins', coins);
        updateCoinDisplay();
        const verifyCode = (finalCoins * 17) + 211;
        window.location.href = `${BLACK_MARKET_BASE_URL}&entry.94782409=${finalCoins}&entry.1993098186=${verifyCode}`;
    }

    function addDevTool() {
        const devBtn = document.createElement('div');
        devBtn.className = 'dev-badge'; devBtn.innerText = 'ğŸ› ï¸ DEV';
        devBtn.onclick = () => {
            let cmd = prompt("1.+10 / 2.Reset / 3.Finish");
            if (cmd==='1') { coins+=10; localStorage.setItem('dino_coins', coins); location.reload(); }
            if (cmd==='2') { localStorage.setItem('dino_coins', 3); localStorage.removeItem('dino_market_entered'); location.reload(); }
            if (cmd==='3') { currentQuiz = questions.length; showQuestion(); }
        };
        document.body.appendChild(devBtn);
    }
</script>
</body>
</html>






